(function(e,t){HoldToDelete=function(e,t){this.dom_elements=this.getDomElements(e);this.options=this.getOptions(t);this.timeout_settings=this.getTimeoutSettings();this.mouseup_check=false;this.reference_element=false;this.mouse_click_mapping={left_click:0,middle_click:1,right_click:2};this.classname_running="holdtodelete_running";if(this.dom_elements){this.registerReferenceEvents();this.wrapReferenceElements()}if(this.options.class_name){this.setClassNames()}};HoldToDelete.prototype.getDomElements=function(e){if(e&&typeof e==="string"){return this.selector(e,false)}else if(e&&this.isDomElement(e)===true){return e}else{throw new Error("No element was specified for HoldToDelete to use. Please specify one.")}};HoldToDelete.prototype.getTimeoutSettings=function(){var e={};e.seconds=this.options.seconds*1e3;e.callback_timeout=this.options.timeout*1e3;return e};HoldToDelete.prototype.selector=function(e,n){var r=t.querySelectorAll(e);if(n){return r[0]}else{return r}};HoldToDelete.prototype.selectFeedbackElement=function(e){var t=e.nextSibling;if(t&&t.className.indexOf("holdtodelete")>-1&&t.nodeName=="I"){return t}else{return false}};HoldToDelete.prototype.selectFeedbackWrapper=function(e){var t=e.parentNode;if(t&&t.className.indexOf("holdtodelete_parent")>-1&&t.nodeName=="DIV"){return t}else{return false}};HoldToDelete.prototype.getOptions=function(e){var t={seconds:3,timeout:0,remove_feedback:true,border_radius_percentage:false,class_name:""};if(e&&typeof e==="object"){for(var n in e){if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&typeof t[n]===typeof e[n]){t[n]=e[n]}else{throw new Error(n+" was not specified properly. It should be the data type "+typeof t[n])}}}return t};HoldToDelete.prototype.isDomElement=function(e){for(var t=0;t<e.length;t++){if(typeof e[t]=="object"&&"nodeType"in e[t]&&e[t].nodeType===1&&e[t].cloneNode){return true}}};HoldToDelete.prototype.wrapReferenceElements=function(){for(var e=0;e<this.dom_elements.length;e++){var n=t.createElement("div");n.className="holdtodelete_parent";var r=this.dom_elements[e];r.parentNode.insertBefore(n,r);n.appendChild(r)}};HoldToDelete.prototype.browserSupportsTouchEvents=function(){return"ontouchstart"in t.documentElement};HoldToDelete.prototype.getSourceElement=function(e){return e.target||e.srcElement};HoldToDelete.prototype.registerReferenceEvents=function(){for(var e=0;e<this.dom_elements.length;e++){var n=this.dom_elements[e];if(this.browserSupportsTouchEvents()){n.addEventListener("touchstart",function(e){this.mouseDownHandler(this.getSourceElement(e))}.bind(this));n.addEventListener("touchend",function(e){this.mouseUpHandler(this.getSourceElement(e));if(!this.anim_timer){this.removeReferenceElement()}}.bind(this));n.addEventListener("touchmove",function(e){var n=t.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(n!=this.selectFeedbackElement(this.getSourceElement(e))&&n!=this.reference_element){this.mouseUpHandler(this.getSourceElement(e));if(!this.anim_timer){this.removeReferenceElement()}}}.bind(this))}else{n.addEventListener("mousedown",function(e){if(this.isLeftClick(e)){this.mouseDownHandler(this.getSourceElement(e))}else{this.mouseUpHandler(this.getSourceElement(e));this.removeReferenceElement()}}.bind(this));n.addEventListener("mouseup",function(e){this.mouseUpHandler(this.getSourceElement(e));if(!this.anim_timer){this.removeReferenceElement()}}.bind(this));n.addEventListener("mouseout",function(e){if(e.toElement!=this.selectFeedbackElement(this.getSourceElement(e))){this.mouseUpHandler(this.getSourceElement(e));if(!this.anim_timer){this.removeReferenceElement()}}}.bind(this))}}};HoldToDelete.prototype.setClassNames=function(){for(var e=0;e<this.dom_elements.length;e++){var t=this.dom_elements[e];t.className+=" "+this.options.class_name}};HoldToDelete.prototype.isLeftClick=function(e){if("buttons"in e){return e.buttons===1}else if("which"in e){if(e.which===1||e.which===3){return true}}else{return e.button===1}};HoldToDelete.prototype.registerFeedbackEvents=function(e){e.addEventListener("mouseup",function(e){this.mouseUpHandler(this.reference_element);if(!this.anim_timer){this.removeReferenceElement()}}.bind(this));e.addEventListener("mouseout",function(e){if(e.toElement!=this.reference_element){this.mouseUpHandler(this.reference_element);this.removeReferenceElement()}}.bind(this));e.addEventListener("mousedown",function(e){if(!this.isLeftClick(e)){this.mouseUpHandler(this.reference_element);this.removeReferenceElement()}}.bind(this))};HoldToDelete.prototype.mouseDownHandler=function(e){this.setMouseupCheck(true);this.setReferenceElement(e);this.reference_element.className+=" "+this.classname_running;var t=this.getFeedbackObject(this.reference_element);var n=this.insertFeedbackElement(t,e);this.registerFeedbackEvents(n);this.callEvent("holdtodelete_started");var r=(new Date).getTime();this.anim_timer=setInterval(function(){var e=Math.min(1,((new Date).getTime()-r)/this.timeout_settings.seconds);n.style.width=0+e*(t.width-0)+"px";this.callEvent("holdtodelete_running");if(e===1){this.setMouseupCheck(false);clearInterval(this.anim_timer);if(!this.mouseup_check){this.callEvent("holdtodelete_before_timeout");this.callback_timer=setTimeout(function(){this.callEvent("holdtodelete_finished");if(this.options.remove_feedback){this.setMouseupCheck(true);this.mouseUpHandler(this.reference_element)}this.removeReferenceElement()}.bind(this),this.timeout_settings.callback_timeout)}}}.bind(this),1)};HoldToDelete.prototype.mouseUpHandler=function(e){clearInterval(this.anim_timer);if(this.mouseup_check==true){e.className=e.className.replace(" "+this.classname_running,"");this.removeFeedbackElement(e)}};HoldToDelete.prototype.setReferenceElement=function(e){this.reference_element=e};HoldToDelete.prototype.removeReferenceElement=function(){this.reference_element=false};HoldToDelete.prototype.constructFeedbackElement=function(){var e=t.createElement("i");e.className="holdtodelete";return e};HoldToDelete.prototype.insertFeedbackElement=function(e){var t=this.constructFeedbackElement();if(typeof e==="object"){for(var n in e.css){t.style.cssText+=n+": "+e.css[n]+";"}}if(e.border_radius!=0){if(e.hasOwnProperty("border_left_radius")){t.style.cssText+="border-top-left-radius: "+e.border_left_radius+"px;"}if(e.hasOwnProperty("border_right_radius")){t.style.cssText+="border-top-right-radius: "+e.border_right_radius+"px;"}if(e.hasOwnProperty("border_radius")&&e.border_radius!=0){t.style.cssText+="border-top-width: "+e.border_radius+"px;"}}e.clicked_element.parentNode.insertBefore(t,e.clicked_element.nextSibling);return t};HoldToDelete.prototype.getFeedbackObject=function(e){var t={};t.clicked_element=e;t.wrapper=this.selectFeedbackWrapper(e);t.width=t.wrapper.offsetWidth;if(window.getComputedStyle){t.border_left_radius=this.formatStringtoNumber(window.getComputedStyle(e,null).getPropertyValue("border-top-left-radius"));t.border_right_radius=this.formatStringtoNumber(window.getComputedStyle(e,null).getPropertyValue("border-top-right-radius"));if(t.border_left_radius>=t.border_right_radius){t.border_radius=this.getBorderRadiusHeight(t.border_left_radius)}else if(t.border_left_radius<t.border_right_radius){t.border_radius=this.getBorderRadiusHeight(t.border_right_radius)}else{t.border_radius=0}}return t};HoldToDelete.prototype.formatStringtoNumber=function(e){e=e.replace(/ /g,"");if(e.slice(-2)==="px"){e=e.slice(0,-2)}else if(e.slice(-1)==="%"){e=e.slice(0,-1)/100*this.reference_element.offsetWidth}return Number(e)};HoldToDelete.prototype.getBorderRadiusHeight=function(e){if(this.options.border_radius_percentage){var t=e/this.reference_element.offsetWidth*100;return t/100*this.reference_element.offsetHeight}return e};HoldToDelete.prototype.removeFeedbackElement=function(e){var t=this.selectFeedbackElement(e);if(t){t.parentNode.removeChild(t)}};HoldToDelete.prototype.setMouseupCheck=function(e){if(typeof e==="boolean"){this.mouseup_check=e}};HoldToDelete.prototype.on=function(e,n){if(t.addEventListener){for(var r=0;r<this.dom_elements.length;r++){var i=this.dom_elements[r];i.addEventListener(e,function(){n(this.reference_element,this.selectFeedbackElement(this.reference_element))}.bind(this),false)}}};HoldToDelete.prototype.callEvent=function(e){var n=["holdtodelete_started","holdtodelete_running","holdtodelete_before_timeout","holdtodelete_finished"];if(t.createEvent&&typeof e==="string"&&n.indexOf(e)>-1){var r=t.createEvent("Event");r.initEvent(e,true,true);for(var i=0;i<this.dom_elements.length;i++){var s=this.dom_elements[i];s.dispatchEvent(r)}}};e.HoldToDelete=HoldToDelete})(window,window.document)